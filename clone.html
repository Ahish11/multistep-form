<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Onboard</title>
  <link rel="shortcut icon" type="image/png" href="{% static 'icons/favicon.png' %}">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&family=PT+Sans:ital,wght@0,400;0,700;1,400;1,700&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
    rel="stylesheet">
  <style>
    * {
      margin: 0;
      font-family: 'PT Sans', sans-serif;
    }

    .userQual-banner-sec {
      background-image: url("./images/bannerUserqual.png");
      background-size: cover;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .userQual-form {
      background-color: white;
      padding: 36px 44px 34px 44px;
      border-radius: 30px;
      overflow-y: scroll;
    }

    .defaultCheckbox [type=checkbox] {
      border-radius: 50%;
    }

    .userQual-inner {
      -webkit-box-shadow: 0 0 6px 0 #cbcbcb;
      box-shadow: 0 0 6px 0 #cbcbcb;
      margin: auto;
      background-color: white;
      width: 552px;
      max-width: 100%;
      border-radius: 30px;
    }

    .userQual-stevelogo {
      height: 40px;
    }

    .userQual-h {
      font-size: 24px;
      font-weight: 700;
      color: black;
      font-family: 'PT Sans', sans-serif;
      margin: 16px 0 24px 0;
      text-align: center;
    }

    .topbar-userQual-form {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .fieldItems-inner {
      border: 1px solid #E8E8E8;
      margin-bottom: 16px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 11px 16px;
    }

    .fieldItems-inner label {
      font-size: 16px;
    }

    .next-outer {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .unChecked--box {
      width: 19px;
      height: 19px;
      border-radius: 50%;
      border: 1px solid #A7A7A7;
    }

    .checked--box {
      background: url("./images/checked-icon.png") no-repeat;
      background-size: cover;
      width: 19px;
      height: 19px;
    }

    .next-outer-btn,
    .unChecked--box,
    .checked--box,
    .fieldItems-inner,
    .submit-btn {
      cursor: pointer;
    }

    .next-outer-btn,
    .submit-btn {
      width: 100%;
      border-radius: 4px;
      border: 1px solid beige;
      background-color: #57BEFF;
      color: white;
      font-size: 17px;
      font-weight: 600;
      height: 44px;
      margin: 8px 0 16px 0;
    }

    .textArea-box input::placeholder {
      color: #D8D8D8;
      margin-top: -10px;
      display: flex;
      align-items: start;
    }

    .inputContainer {
      margin: auto;
      width: 18%;
      margin-top: 16px;
    }

    .inputContainer {
      accent-color: #8138F5;
    }

    .textArea-box input {
      /* padding: 23px 10px; */
      padding: 0 10px;
      height: 66px;
      color: #1a1a1a;
      font-size: 14px;
      border-radius: 10px;
      max-height: 66px;
      overflow-y: scroll;
      width: 95%;
      border: 1px solid #57BEFF;
      outline: 0;
    }

    .back {
      cursor: pointer;
    }

    /* script */
    .active-other-fieldItems {
      border: 1px solid #57BEFF;
    }

    .textArea-box {
      display: none;
    }

    @media (max-height: 800px) {
      .userQual-form-vh {
        overflow-y: scroll;
        height: calc(100vh - 100px);
      }
    }

    .userQual-form {
      display: none;
    }

    .userQual-form.show {
      display: block;
    }

    .pleaseSelect {
      text-align: center;
      color: #ff3f3f;
      font-size: 15px;
      display: none;
    }
  </style>
</head>

<body>
  <section class="userQual-banner-sec">
    <div class="popup-userQual">
      <div class="userQual-inner">
        <form class="userQual-form userQual-form-vh">
          <div class="form-container">
            <div class="topbar-userQual-form">
              <div class="back">Back</div>
              <div>
                <img class="userQual-stevelogo" src="{% static 'icons/newUserOnboard/steveLogoo.png' %}" alt="logo">
              </div>
              <p class="userQual-h">What Kind of videos do you create?</p>
            </div>
            <div class="field-items">
              <div class="fieldItems-inner">
                <label for="create1" class="Explainer">Explainer</label>
                <div class="unChecked--box"></div>
              </div>
              <div class="fieldItems-inner">
                <label for="create2">Courses</label>
                <div class="unChecked--box"></div>
              </div>
              <div class="fieldItems-inner">
                <label for="">Educational</label>
                <div class="unChecked--box"></div>
              </div>
              <div class="fieldItems-inner">
                <label for="">Internal Communication</label>
                <div class="unChecked--box"></div>
              </div>
              <div class="fieldItems-inner">
                <label for="">Promotional</label>
                <div class="unChecked--box"></div>
              </div>
              <div class="fieldItems-inner">
                <label for="">Social Media</label>
                <div class="unChecked--box"></div>
              </div>
              <div class="fieldItems-inner">
                <label for="">How to’s & Tips Videos</label>
                <div class="unChecked--box"></div>
              </div>
              <div>
                <div class="other--fieldItems fieldItems-inner">
                  <label for="">Other (Specify)</label>
                  <div class="unChecked--box activeOthers"></div>
                </div>
                <div class="textArea-box textArea-box3">
                  <input class="other-Input-item" type="text" onkeyup="checkValueisPresent()"
                    placeholder="Type your text…">
                </div>
              </div>
              <div class="pleaseSelect">
                Please select at least one Item
              </div>
            </div>
          </div>
          <div class="next-outer">
            <input class="next-outer-btn" type="submit" value="Next">
          </div>
          <div class="inputContainer">
            <input type="radio" checked>
            <input type="radio">
            <input type="radio">
            <input type="radio">
            <input type="radio">
          </div>
        </form>
      </div>
      <div class="userQual-inner">
        <form class="userQual-form">
          <div class="form-container">
            <div class="topbar-userQual-form">
              <div class="back">Back</div>
              <div>
                <img class="userQual-stevelogo" src="{% static 'icons/newUserOnboard/steveLogoo.png' %}" alt="logo">
              </div>
              <p class="userQual-h">What is your goal?</p>
            </div>
            <div class="field-items">
              <div class="fieldItems-inner">
                <label for="create1" class="Explainer">Create for your Business</label>
                <div class="unChecked--box"></div>
              </div>
              <div class="fieldItems-inner">
                <label for="create2">Resell as part of the Agency
                </label>
                <div class="unChecked--box"></div>
              </div>
              <div class="fieldItems-inner">
                <label for="">Monetize your YouTube or Social channels</label>
                <div class="unChecked--box"></div>
              </div>
              <div class="fieldItems-inner">
                <label for="">Personal use</label>
                <div class="unChecked--box"></div>
              </div>
              <div>
                <div class="other--fieldItems fieldItems-inner">
                  <label for="">Other (Specify)</label>
                  <div class="unChecked--box activeOthers"></div>
                </div>
                <div class="textArea-box textArea-box3">
                  <input class="other-Input-item" type="text" onkeyup="checkValueisPresent()"
                    placeholder="Type your text…">
                </div>
              </div>
              <div class="pleaseSelect">
                Please select at least one Item
              </div>
            </div>
          </div>
          <div class="next-outer">
            <input class="next-outer-btn" type="submit" value="Next">
          </div>
          <div class="inputContainer">
            <input type="radio">
            <input type="radio" checked>
            <input type="radio">
            <input type="radio">
            <input type="radio">
          </div>
        </form>
      </div>
      <div class="userQual-inner">
        <form class="userQual-form">
          <div class="form-container">
            <div class="topbar-userQual-form">
              <div class="back">Back</div>
              <div>
                <img class="userQual-stevelogo" src="{% static 'icons/newUserOnboard/steveLogoo.png' %}" alt="logo">
              </div>
              <p class="userQual-h">How big is your Organization?</p>
            </div>
            <div class="field-items">
              <div class="fieldItems-inner">
                <label for="create1" class="Explainer">Solo</label>
                <div class="unChecked--box"></div>
              </div>
              <div class="fieldItems-inner">
                <label for="create2">2-10 employees
                </label>
                <div class="unChecked--box"></div>
              </div>
              <div class="fieldItems-inner">
                <label for="">11-100 employees
                </label>
                <div class="unChecked--box"></div>
              </div>
              <div class="fieldItems-inner">
                <label for="">101-500 employees
                </label>
                <div class="unChecked--box"></div>
              </div>
              <div class="fieldItems-inner">
                <label for="">501-1000 employees
                </label>
                <div class="unChecked--box"></div>
              </div>
              <div class="fieldItems-inner">
                <label for="">More than 1000 employees
                </label>
                <div class="unChecked--box"></div>
              </div>
              <div class="pleaseSelect">
                Please select at least one Item
              </div>
            </div>
          </div>
          <div class="next-outer">
            <input class="next-outer-btn" type="submit" value="Next">
          </div>
          <div class="inputContainer">
            <input type="radio">
            <input type="radio">
            <input type="radio" checked>
            <input type="radio">
            <input type="radio">
          </div>
        </form>
      </div>
      <div class="userQual-inner">
        <form class="userQual-form userQual-form-vh">
          <div class="form-container">
            <div class="topbar-userQual-form">
              <div class="back">Back</div>
              <div>
                <img class="userQual-stevelogo" src="{% static 'icons/newUserOnboard/steveLogoo.png' %}" alt="logo">
              </div>
              <p class="userQual-h">How would you describe your role?</p>
            </div>
            <div class="field-items">
              <div class="fieldItems-inner">
                <label for="create1" class="Explainer">Marketer</label>
                <div class="unChecked--box"></div>
              </div>
              <div class="fieldItems-inner">
                <label for="create2">Content Creator
                </label>
                <div class="unChecked--box"></div>
              </div>
              <div class="fieldItems-inner">
                <label for="">Educator & Course Creator
                </label>
                <div class="unChecked--box"></div>
              </div>
              <div class="fieldItems-inner">
                <label for="">YouTuber
                </label>
                <div class="unChecked--box"></div>
              </div>
              <div class="fieldItems-inner">
                <label for="">Social Media Influencer
                </label>
                <div class="unChecked--box"></div>
              </div>
              <div class="fieldItems-inner">
                <label for="">Sales Professional
                </label>
                <div class="unChecked--box"></div>
              </div>
              <div class="fieldItems-inner">
                <label for="">HR & Internal Communications
                </label>
                <div class="unChecked--box"></div>
              </div>
              <div>
                <div class="other--fieldItems fieldItems-inner">
                  <label for="">Other (Specify)</label>
                  <div class="unChecked--box activeOthers"></div>
                </div>
                <div class="textArea-box textArea-box3">
                  <input class="other-Input-item" type="text" onkeyup="checkValueisPresent()"
                    placeholder="Type your text…">
                </div>
              </div>
              <div class="pleaseSelect">
                Please select at least one Item
              </div>
            </div>
          </div>
          <div class="next-outer">
            <input class="next-outer-btn" type="submit" value="Next">
          </div>
          <div class="inputContainer">
            <input type="radio">
            <input type="radio">
            <input type="radio">
            <input type="radio" checked>
            <input type="radio">
          </div>
        </form>
      </div>
      <div class="userQual-inner">
        <form class="userQual-form userQual-form-last userQual-form-vh">
          <div class="form-container">
            <div class="topbar-userQual-form">
              <div class="back">Back</div>
              <div>
                <img class="userQual-stevelogo" src="{% static 'icons/newUserOnboard/steveLogoo.png' %}" alt="logo">
              </div>
              <p class="userQual-h">Where do you publish/distribute your videos?</p>
            </div>
            <div class="field-items">
              <div class="fieldItems-inner">
                <label for="create1" class="Explainer">YouTube and other channels</label>
                <div class="unChecked--box"></div>
              </div>
              <div class="fieldItems-inner">
                <label for="create2">Internal Teams
                </label>
                <div class="unChecked--box"></div>
              </div>
              <div class="fieldItems-inner">
                <label for="">Social Media
                </label>
                <div class="unChecked--box"></div>
              </div>
              <div class="fieldItems-inner">
                <label for="">Website & Blogs
                </label>
                <div class="unChecked--box"></div>
              </div>
              <div class="fieldItems-inner">
                <label for="">LMS
                </label>
                <div class="unChecked--box"></div>
              </div>
              <div>
                <div class="other--fieldItems fieldItems-inner">
                  <label for="">Other (Specify)</label>
                  <div class="unChecked--box activeOthers"></div>
                </div>
                <div class="textArea-box textArea-box3">
                  <input class="other-Input-item other-Input-item-last" type="text" onkeyup="checkValueisPresent()"
                    placeholder="Type your text…">
                </div>
              </div>
              <div class="pleaseSelect">
                Please select at least one Item
              </div>
            </div>
          </div>
          <div class="next-outer">
            <input class="next-outer-btn" id="submit-values" type="submit" value="Submit">
          </div>
          <div class="inputContainer">
            <input type="radio">
            <input type="radio">
            <input type="radio">
            <input type="radio">
            <input type="radio" checked>
          </div>
        </form>
      </div>
    </div>
  </section>
  <script>
    var csrftoken = '{{request.COOKIES.csrftoken}}'
    var siteurl = '{{CURRENT_SITE_URL}}'
    let i = 0;
    const userQualForm = document.querySelectorAll(".userQual-form");
    const formList = [];
    const fieldItemsInnerList = document.querySelectorAll('.fieldItems-inner');
    fieldItemsInnerList.forEach(fieldItemsInnerList => {
      fieldItemsInnerList.addEventListener("click", () => {
        //toggle checked&unchecked
        const childElementToggle = fieldItemsInnerList.querySelector('.checked--box, .unChecked--box');
        // console.log(childElementToggle);
        if (childElementToggle) {
          childElementToggle.classList.toggle("checked--box");
          childElementToggle.classList.toggle("unChecked--box");
        }
        //unique form
        if (i === 2) {
          const checkboxes = userQualForm[i].querySelectorAll('.fieldItems-inner .checked--box');
          if (checkboxes.length > 1) {
            checkboxes.forEach(checkbox => {
              if (checkbox !== childElementToggle) {
                checkbox.classList.remove("checked--box");
                checkbox.classList.add("unChecked--box");
              }
            });
          }
        }
        // for select msg none,when checked is present
        const pleaseSelects = document.querySelectorAll(".pleaseSelect");
        const isCheckboxThere = document.querySelectorAll('.userQual-form.show .fieldItems-inner .checked--box');
        isCheckboxThere.forEach(isCheckboxThere => {
          if (isCheckboxThere) {
            pleaseSelects.forEach(pleaseSelects => {
              pleaseSelects.style.display = "none"
            })
          }
        })

      });
    });
    //others append
    const fieldItemsOther = document.querySelectorAll('.other--fieldItems')
    const othersTextArea = document.querySelectorAll('.textArea-box')
    const othersFieldHandler = () => {
      fieldItemsOther.forEach(fieldItemsOther => {
        fieldItemsOther.addEventListener("click", () => {
          const childElement = fieldItemsOther.querySelector('.activeOthers')
          if (childElement.classList.contains("checked--box")) {
            childElement.parentElement.classList.add('active-other-fieldItems');
            childElement.parentElement.nextElementSibling.style.display = "block"
          }
          else {
            childElement.parentElement.classList.remove('active-other-fieldItems');
            childElement.parentElement.nextElementSibling.style.display = "none"
          }
        });
      });
    };
    othersFieldHandler()

    console.log("userQualForm.length", userQualForm.length);
    console.log("userQualForm", userQualForm);
    // back option
    const backBtn = document.querySelectorAll(".back");
    backBtn.forEach((button) => {
      button.addEventListener("click", () => {
        userQualForm[i].classList.remove("show");
        if (i > 0) {
          i--;
          console.log(i);
        }
        userQualForm[i].classList.add("show");
      });
    });

    // otherInput.addEventListener("onkeyup",checkValueisPresent())
    // otherInput.value !== "" ? otherInput.style.border = "1px solid pink" : otherInput.style.border = "1px solid red"
    // next script

    const nextBtn = document.querySelectorAll(".next-outer-btn")
    const fieldItemsInner = document.querySelectorAll(".fieldItems-inner")
    userQualForm[i].classList.add("show")
    nextBtn.forEach(nextBtn => {
      nextBtn.addEventListener("click", (e) => {
        userQualForm.forEach(e => event.preventDefault());
        const checkedBoxes = userQualForm[i].querySelectorAll(".checked--box");
        const pleaseSelect = userQualForm[i].querySelector(".pleaseSelect");
        var otherInput = userQualForm[i].querySelector(".other-Input-item");
        var activeOthers = userQualForm[i].querySelector(".activeOthers");
        if (checkedBoxes.length > 0) {
          if (activeOthers && activeOthers.classList.contains("checked--box") &&
            (!otherInput || otherInput.value.trim() === "")) {
            // otherInput.style.border = "1px solid red";
            checkValueisPresent()
            // otherInput.addEventListener("keyup",checkValueisPresent())
          }
          else {
            const arrList = [];
            const container = document.querySelectorAll('.userQual-form.show .fieldItems-inner');
            container.forEach(container => {
              const childof = container.querySelector('div');
              if (childof.classList.contains("checked--box")) {
                const values = childof.parentElement.querySelector("label");
                const checkedValues = values.textContent.trim();
                if (checkedValues === "Other (Specify)") {
                  const valOthers = userQualForm[i].querySelector('.other-Input-item')
                  var otherInputValue = valOthers.value.trim()
                  arrList.push(otherInputValue);
                }
                else {
                  arrList.push(checkedValues);
                }
              }
            })
            formList[i] = arrList
            console.log("formData", formList);
            if (i < userQualForm.length - 1) {
              userQualForm[i].classList.remove("show");
              i += 1;
              userQualForm[i].classList.add("show");
            }
          }
        }
        else {
          pleaseSelect.style.display = "block";
        }
      });
    });

    function checkValueisPresent() {
      var otherInput = userQualForm[i].querySelector(".other-Input-item");
      // if(otherInput.value.trim() !== "") {
      //   otherInput.style.border = "1px solid #57BEFF"
      //   // console.log("inside other input");
      // }else{
      //   otherInput.style.border = "1px solid red"
      // }
      // 
      otherInput.value.trim() !== "" ?
        otherInput.style.border = "1px solid #57BEFF" : otherInput.style.border = "1px solid red"
    }

    //submit area
    const submitBtn = document.getElementById('submit-values');
    submitBtn.addEventListener("click", () => {
      const organizationSizeString = formList[2].join(', ');
      const formSubmitData = {
        video_categories: formList[0],
        video_goal: formList[1],
        organisation_size: organizationSizeString,
        user_role: formList[3],
        video_publish_in: formList[4],
      };
      let video_categories = formSubmitData.video_categories;
      let video_goal = formSubmitData.video_goal;
      let organisation_size = formSubmitData.organisation_size;
      let user_role = formSubmitData.user_role;
      let video_publish_in = formSubmitData.video_publish_in;

      var checkedBoxes = userQualForm[i].querySelectorAll(".checked--box");
      if (checkedBoxes.length > 0) {
        var otherInput = userQualForm[i].querySelector(".other-Input-item");
        var activeOthers = userQualForm[i].querySelector(".activeOthers");
        if (activeOthers && activeOthers.classList.contains("checked--box") &&
          (!otherInput || otherInput.value.trim() === "")) {
          // otherInput.style.border = "1px solid red";
        }
        else {
          console.log('in ajax');
          $.ajax({
            type: "POST",
            // url: siteurl + "/api/v1/user/collection/",
            data: { video_categories: video_categories, video_goal: video_goal, organisation_size: organisation_size, user_role: user_role, video_publish_in: video_publish_in },
            headers: { 'Access-Control-Allow-Origin': '*', "X-CSRFToken": csrftoken },
            success: function (result) {
              let isSuccess = result.success
              if (isSuccess) {
                window.location.href = `${siteurl}/dashboard`;
                console.log("redirected");
              }
            },
            error: function (xhr, status, error) {
              console.error("POST request failed:", error);
            }
          });
        }
      }
    })


    const radioButtons = document.querySelectorAll('input[type="radio"]');
    radioButtons.forEach(radioButton => {
      radioButton.addEventListener('click', (e) => {
        e.preventDefault();
      });
    });
  </script>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"
    integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous">
    </script>
</body>

</html>